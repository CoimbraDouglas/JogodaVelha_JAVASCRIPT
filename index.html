<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Velha</title>

    <style>
        table {
            width: 360px;
            height: 360px;
            border-collapse: collapse;
            margin: 20px auto;
            border: 4px solid #222;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }
        table tr{background-color: red; font: bold 46px Verdana; color: antiquewhite;}
        table tr td {
            text-align: center;
            font: bold 48px Verdana;
            color: #fff;
            background-color: #e63946;
            width: 33.33%;
            height: 120px;
            transition: background-color 0.3s, transform 0.2s;
        }
        table tr td:hover {
            background-color: #457b9d;
            cursor: pointer;
            transform: scale(1.05);
        }
        input[type=text] {
            width: 94%;
            height: 35px;
            margin-bottom: 10px;
            padding: 5px 10px;
            font-size: 16px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        input[type=button] {
            width: 100%;
            height: 45px;
            font-size: 18px;
            font-weight: bold;
            background-color: #1d3557;
            color: white;
            border: none;
            border-radius: 6px;
            transition: background-color 0.3s;
        }
        input[type=button]:hover {
            background-color: #457b9d;
            cursor: pointer;
        }
        fieldset {
            border: 2px solid #1d3557;
            border-radius: 10px;
            width: 360px;
            margin: 0 auto 20px auto;
            padding: 15px;
            background-color: #f1faee;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        legend {
            font-weight: bold;
            font-size: 20px;
            color: #1d3557;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #1d3557;
        }
        h3#jogadorAtual {
            text-align: center;
            font-size: 22px;
            color: #1d3557;
            margin-top: 10px;
        }
        h1 {
            text-align: center;
            font-family: 'Verdana';
            color: #1d3557;
        }
    </style>
    <script>
        //esconde o tabuleiro
        window.onload = function () {
            document.getElementById('game').style.visibility = 'hidden'
        };

        function Jogador(nome, forma){
            this.nome = nome;
            this.forma = forma;
        }

        var jogador1, jogador2;

        var jogadorAtual;
        var formas = ['X', 'O'];
        var tabuleiro = new Array(9);
        
        initGame = function(){
            var nomeJogador1 = document.getElementById('jogador1').value;
            var nomeJogador2 = document.getElementById('jogador2').value;

            if (nomeJogador1.trim() === '' || nomeJogador2.trim() === '') {
                alert('Por favor, insira o nome dos dois jogadores!');
            return;
        }

        jogador1 = new Jogador(nomeJogador1, 0); // X
        jogador2 = new Jogador(nomeJogador2, 1); // O
        jogadorAtual = jogador1;

        setLabelJogadorAtual();
        document.getElementById('game').style.visibility = 'visible';
        }


        reset = function (){window.location.reload();}
        setLabelJogadorAtual = function (){
            document.getElementById('jogadorAtual').innerHTML = "Jogador atual: " + jogadorAtual.nome;
        }

        tabuleiroIsFilled = function() {
            var preenchidos = 0;
            for(var i=0; i< tabuleiro.length;i++)
                if(tabuleiro[i] != undefined)
                    preenchidos++;
            return preenchidos == tabuleiro.length;
        }
        //Verifica vit칩rias em linhas
        allElementsInSomeLine = function() {
            for(var i=0; i <7; i+=3){
                if(tabuleiro[i] == 'X' && tabuleiro[i+1] == 'X' && tabuleiro[i+2] == 'X'){
                    setTimeout(function() {
                        alert(jogador1.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
                }
                if(tabuleiro[i] == 'O' && tabuleiro[i+1] == 'O' && tabuleiro[i+2] == 'O'){
                    setTimeout(function() {
                        alert(jogador2.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
                }
            }
        }
        //Verifica vit칩rias em colunas
        allElementsInSomeColumn = function(){
            for(var i=0; i <3; i++){
                if(tabuleiro[i] == 'X' && tabuleiro[i+3] == 'X' && tabuleiro[i+6] == 'X'){
                    setTimeout(function() {
                        alert(jogador1.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
                }
                if(tabuleiro[i] == 'O' && tabuleiro[i+3] == 'O' && tabuleiro[i+6] == 'O'){
                    setTimeout(function() {
                        alert(jogador2.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
                }
            }
        }
        //Verifica vit칩rias na diagonal
        allElementsInSomeDiagonal = function(){
            if((tabuleiro[0] == 'X' && tabuleiro[4] == 'X' && tabuleiro[8] == 'X') ||
            (tabuleiro[2] == 'X' && tabuleiro[4] == 'X' && tabuleiro[6] == 'X')){
                setTimeout(function() {
                        alert(jogador1.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
            }
            else if((tabuleiro[0] == 'O' && tabuleiro[4] == 'O' && tabuleiro[8] == 'O') ||
            (tabuleiro[2] == 'O' && tabuleiro[4] == 'O' && tabuleiro[6] == 'O')){
                setTimeout(function() {
                        alert(jogador2.nome + ' Vencedor!!!')

                        reset();
                    }, 300);
            }
        }
        //Fun칞칚o de verificar o clique
        setOnCeil = function(cel, pos){
            if(tabuleiro[pos] == undefined){
                cel.innerHTML = formas[jogadorAtual.forma];
                tabuleiro[pos] = formas[jogadorAtual.forma];

                (jogadorAtual.forma == 0 ) ? jogadorAtual = jogador2:jogadorAtual = jogador1;
                setLabelJogadorAtual();

            }else{
                alert('Ops. Campo j치 foi marcado.');
            }
            allElementsInSomeLine();
            allElementsInSomeColumn();
            allElementsInSomeDiagonal();

            if(tabuleiroIsFilled()){
                alert('Ninguem Ganhou! Tente novamente.');
                reset();
            }
        }
    </script>
</head>

<body>
    <h1>游꿡 Jogo da Velha</h1>
    <fieldset>       
        <legend> Jogadores </legend>
        <label for = "Jogador 1"> Jogador 1: </label>
        <input type= "text" id = "jogador1" /> 
        <label for = "Jogador 2"> Jogador 2: </label>
        <input type= "text" id = "jogador2" />
        <input type="button" value="Iniciar" style="margin-top:4px; 
        height:25px; width:150px; font-size:14px;" onclick="javascript: initGame()"/>

    </fieldset>
    <h3 id="jogadorAtual"></h3>
    <div id="game">
        <table cellpadding="0" cellspacing="1">
            <tr border = "1">
                <td onclick="javascript: setOnCeil(this, 0)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 1)"onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 2)"onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
            </tr>
            <tr border = "1">
                <td onclick="javascript: setOnCeil(this, 3)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 4)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 5)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
            </tr>
            <tr border = "1">
                <td onclick="javascript: setOnCeil(this, 6)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 7)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
                <td onclick="javascript: setOnCeil(this, 8)" onmouseover="javascript: this.style.backgroundColor='blue'" onmouseout="javascript:this.style.backgroundColor='red'">&nbsp;</td>
            </tr>
        </table>
    </div>   
</body>

</html>
